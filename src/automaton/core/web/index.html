<!DOCTYPE html>
<html>
<head>
  <title>debug page</title>
  <meta charset='utf-8'>
</head>
<body>
  <script type="text/javascript" src="https://cdn.rawgit.com/dcodeIO/protobuf.js/6.8.8/dist/protobuf.min.js"></script>
  <script type="text/javascript" src="message.js"></script>
  <textarea id=".proto" rows="10" cols="80" align="right">
syntax = "proto3";

// --- protocol messages ---

message Protocol {
  bytes protocol_id = 1;
  repeated bytes file_names = 2;
  repeated bytes files = 3;
}

message ProtocolIDsList {
  repeated bytes protocol_ids = 1;
}

message ProtocolsList {
  repeated Protocol protocols = 1;
}

// -- node messages --

message Node {
  bytes id = 1;
  bytes protocol_id = 2;
  bytes address = 3;
}

message NodeID {
  bytes node_id = 1;
}

message NodeIdsList {
  repeated bytes node_ids = 1;
}

message NodesList {
  repeated Node nodes = 1;
}

message NodeCmdRequest {
  bytes node_id = 1;
  bytes cmd = 2;
  bytes params = 3;
}

message NodeCmdResponse {
  bytes response = 1;
}

message PeerIdsList {
  bytes node_id = 1;
  repeated uint32 peer_ids = 2;
}

message PeerAddressesList {
  bytes node_id = 1;
  repeated bytes peer_addresses = 2;
}

message PeersList {
  bytes node_id = 1;
  repeated Peer peers = 2;
}

message Peer {
  uint32 id = 1;
  bytes address = 2;
}
  </textarea>

  <button type="button" onclick="read_and_parse()">Read and parse</button>
  <br>


  <textarea id="create_msg" rows="10" cols="80">
{
    "Node": {
      "id": "1231j2",
      "protocol_id": "213123",
      "address": "theaddress"
    }
}
  </textarea>
  <button type="button" onclick="create_msg()">Create message in buffer</button>
  <br>


  <textarea id="buffer_to_json" rows="10" cols="80" align="right">
  </textarea>
  <button type="button" onclick="buffer_to_json()">buffer to json</button>
  <br>

  <textarea id="Send_command" rows="10" cols="80">
{
  "method" : "launch_node",
  "Msg" :  {
    "Node": {
      "id": "1231j2",
      "protocol_id": "213123",
      "address": "tcp://127.0.0.1:12345"
    }
  }
}
  </textarea>
  <button type="button" onclick="create_and_send_command()">Send command</button>
  <br>

  <textarea id="base64_encoder" rows="10" cols="80"></textarea>
  <button type="button" onclick="base64_encode()">base64 encode</button>
  <br>
  <script>

  </script>
</body>
</html>
